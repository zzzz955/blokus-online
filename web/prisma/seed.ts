import { PrismaClient } from '@prisma/client';
import bcrypt from 'bcryptjs';

const prisma = new PrismaClient();

async function main() {
  console.log('ğŸŒ± ì›¹ì‚¬ì´íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ ì‹œë”© ì‹œì‘...');

  // ê´€ë¦¬ì ê³„ì • ìƒì„±
  const adminPassword = process.env.ADMIN_PASSWORD || 'admin123';
  const hashedPassword = await bcrypt.hash(adminPassword, 12);

  const admin = await prisma.adminUser.upsert({
    where: { username: 'admin' },
    update: {},
    create: {
      username: 'admin',
      passwordHash: hashedPassword,
      role: 'SUPER_ADMIN',
    },
  });

  console.log('âœ… ê´€ë¦¬ì ê³„ì • ìƒì„±:', admin.username);

  // ìƒ˜í”Œ ê³µì§€ì‚¬í•­ ìƒì„±
  const announcement1 = await prisma.announcement.upsert({
    where: { id: 1 },
    update: {},
    create: {
      title: 'ë¸”ë¡œì¿ ìŠ¤ ì˜¨ë¼ì¸ ê³µì‹ ì›¹ì‚¬ì´íŠ¸ ì˜¤í”ˆ!',
      content: `# ë¸”ë¡œì¿ ìŠ¤ ì˜¨ë¼ì¸ ê³µì‹ ì›¹ì‚¬ì´íŠ¸ê°€ ë“œë””ì–´ ì˜¤í”ˆí–ˆìŠµë‹ˆë‹¤! ğŸ‰

ì•ˆë…•í•˜ì„¸ìš”, ë¸”ë¡œì¿ ìŠ¤ ì˜¨ë¼ì¸ ê°œë°œíŒ€ì…ë‹ˆë‹¤.

ì˜¤ëœ ê¸°ë‹¤ë¦¼ ëì— ê³µì‹ ì›¹ì‚¬ì´íŠ¸ê°€ ì •ì‹ìœ¼ë¡œ ì˜¤í”ˆë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ë”ìš± í¸ë¦¬í•˜ê²Œ ê²Œì„ ì •ë³´ë¥¼ í™•ì¸í•˜ê³ , ìµœì‹  ì—…ë°ì´íŠ¸ ì†Œì‹ì„ ë°›ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì›¹ì‚¬ì´íŠ¸ ì£¼ìš” ê¸°ëŠ¥

- **ê²Œì„ ë‹¤ìš´ë¡œë“œ**: ìµœì‹  í´ë¼ì´ì–¸íŠ¸ë¥¼ ì•ˆì „í•˜ê²Œ ë‹¤ìš´ë¡œë“œ
- **ê²Œì„ ê°€ì´ë“œ**: ì´ˆë³´ìë¶€í„° ê³ ìˆ˜ê¹Œì§€ ëª¨ë“  ì „ëµ ê°€ì´ë“œ
- **ê³µì§€ì‚¬í•­**: ì¤‘ìš”í•œ ê²Œì„ ì†Œì‹ê³¼ ì´ë²¤íŠ¸ ì •ë³´
- **íŒ¨ì¹˜ ë…¸íŠ¸**: ê²Œì„ ì—…ë°ì´íŠ¸ ë° ë°¸ëŸ°ìŠ¤ ë³€ê²½ì‚¬í•­
- **ê³ ê°ì§€ì›**: ë¹ ë¥´ê³  ì •í™•í•œ ë¬¸ì˜ ë° ì§€ì› ì„œë¹„ìŠ¤

ì•ìœ¼ë¡œë„ ë” ë‚˜ì€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ ìµœì„ ì„ ë‹¤í•˜ê² ìŠµë‹ˆë‹¤.

ê°ì‚¬í•©ë‹ˆë‹¤!`,
      author: 'admin',
      isPinned: true,
      isPublished: true,
    },
  });

  const announcement2 = await prisma.announcement.upsert({
    where: { id: 2 },
    update: {},
    create: {
      title: 'ê²Œì„ ì´ìš© ê·œì¹™ ë° ë§¤ë„ˆ ì•ˆë‚´',
      content: `# ë¸”ë¡œì¿ ìŠ¤ ì˜¨ë¼ì¸ ì´ìš© ê·œì¹™

ëª¨ë“  í”Œë ˆì´ì–´ê°€ ì¦ê²ê²Œ ê²Œì„ì„ ì¦ê¸¸ ìˆ˜ ìˆë„ë¡ ë‹¤ìŒ ê·œì¹™ì„ ì¤€ìˆ˜í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.

## ê¸°ë³¸ ë§¤ë„ˆ

1. **ìƒëŒ€ë°© ì¡´ì¤‘**: ëª¨ë“  í”Œë ˆì´ì–´ë¥¼ ì¡´ì¤‘í•˜ë©° ê²Œì„í•˜ì„¸ìš”
2. **í˜ì–´í”Œë ˆì´**: ë¶€ì •í–‰ìœ„ë‚˜ ë²„ê·¸ ì•…ìš©ì„ ê¸ˆì§€í•©ë‹ˆë‹¤
3. **ì ì ˆí•œ ì–¸ì–´ ì‚¬ìš©**: ìš•ì„¤ì´ë‚˜ ë¹„ë°©ì€ ì œì¬ ëŒ€ìƒì…ë‹ˆë‹¤

## ê¸ˆì§€ í–‰ìœ„

- í•µ/ì¹˜íŠ¸ í”„ë¡œê·¸ë¨ ì‚¬ìš©
- ê³„ì • ê³µìœ  ë° ëŒ€ë¦¬ í”Œë ˆì´
- ì˜ë„ì ì¸ ê²Œì„ ë°©í•´ í–‰ìœ„
- ê´‘ê³ ì„± ì±„íŒ… ë° ìŠ¤íŒ¸

ìœ„ë°˜ ì‹œ ê²½ê³  â†’ ì •ì§€ â†’ ì˜êµ¬ ì •ì§€ ìˆœì„œë¡œ ì œì¬ë©ë‹ˆë‹¤.

ê±´ì „í•œ ê²Œì„ ë¬¸í™” ì¡°ì„±ì— í•¨ê»˜í•´ ì£¼ì„¸ìš”!`,
      author: 'admin',
      isPinned: false,
      isPublished: true,
    },
  });

  console.log('âœ… ìƒ˜í”Œ ê³µì§€ì‚¬í•­ ìƒì„±:', announcement1.title, announcement2.title);

  // ìƒ˜í”Œ íŒ¨ì¹˜ë…¸íŠ¸ ìƒì„±
  const patchNote1 = await prisma.patchNote.upsert({
    where: { version: '1.0.0' },
    update: {},
    create: {
      version: '1.0.0',
      title: 'ë¸”ë¡œì¿ ìŠ¤ ì˜¨ë¼ì¸ ì •ì‹ ì¶œì‹œ',
      content: `# ë¸”ë¡œì¿ ìŠ¤ ì˜¨ë¼ì¸ v1.0.0 ì •ì‹ ì¶œì‹œ

## ğŸ‰ ìƒˆë¡œìš´ ê¸°ëŠ¥

### ë©€í‹°í”Œë ˆì´ì–´ ì‹œìŠ¤í…œ
- **ì˜¨ë¼ì¸ ëŒ€ì „**: ì „ ì„¸ê³„ í”Œë ˆì´ì–´ì™€ ì‹¤ì‹œê°„ ëŒ€ì „
- **ì¹œêµ¬ ì‹œìŠ¤í…œ**: ì¹œêµ¬ ì¶”ê°€ ë° ì´ˆëŒ€ ê¸°ëŠ¥
- **ëŒ€ê¸°ì‹¤**: ê²Œì„ ì‹œì‘ ì „ ì±„íŒ… ë° ì¤€ë¹„ ì‹œìŠ¤í…œ

### ê²Œì„ ê¸°ëŠ¥
- **í´ë˜ì‹ ë¸”ë¡œì¿ ìŠ¤**: ì „í†µì ì¸ 4ì¸ìš© ë¸”ë¡œì¿ ìŠ¤ ê²Œì„
- **ë­í‚¹ ì‹œìŠ¤í…œ**: ê°œì¸ ì‹¤ë ¥ì— ë”°ë¥¸ ìˆœìœ„ ì‹œìŠ¤í…œ
- **í†µê³„**: ìŠ¹ë¥ , í‰ê·  ì ìˆ˜ ë“± ìƒì„¸í•œ ê²Œì„ í†µê³„

### UI/UX ê°œì„ 
- **ì§ê´€ì ì¸ ì¸í„°í˜ì´ìŠ¤**: ì‰½ê³  í¸ë¦¬í•œ ì¡°ì‘ë²•
- **ë°˜ì‘í˜• ë””ìì¸**: ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸° ì§€ì›
- **í…Œë§ˆ ì‹œìŠ¤í…œ**: ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ ì§€ì›

## ğŸ”§ ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

- **OS**: Windows 10 ì´ìƒ
- **ë©”ëª¨ë¦¬**: 4GB RAM ì´ìƒ
- **ì €ì¥ê³µê°„**: 1GB ì´ìƒ
- **ë„¤íŠ¸ì›Œí¬**: ì•ˆì •ì ì¸ ì¸í„°ë„· ì—°ê²°

## ğŸ“¥ ë‹¤ìš´ë¡œë“œ

ê³µì‹ ì›¹ì‚¬ì´íŠ¸ì—ì„œ ìµœì‹  í´ë¼ì´ì–¸íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”!

ì¦ê±°ìš´ ê²Œì„ ë˜ì„¸ìš”! ğŸ®`,
      releaseDate: new Date('2024-01-15'),
      downloadUrl: '/download',
    },
  });

  console.log('âœ… ìƒ˜í”Œ íŒ¨ì¹˜ë…¸íŠ¸ ìƒì„±:', patchNote1.title);

  // ìƒ˜í”Œ ê³ ê°ì§€ì› ë¬¸ì˜ ìƒì„± (í…ŒìŠ¤íŠ¸ìš©)
  const supportTicket = await prisma.supportTicket.upsert({
    where: { id: 1 },
    update: {},
    create: {
      email: 'test@example.com',
      subject: 'ê²Œì„ ì‹¤í–‰ ì˜¤ë¥˜ ë¬¸ì˜',
      message: 'ê²Œì„ì„ ì‹¤í–‰í•˜ë ¤ê³  í•˜ëŠ”ë° "Missing DLL" ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‚˜ìš”?',
      status: 'PENDING',
    },
  });

  console.log('âœ… ìƒ˜í”Œ ê³ ê°ì§€ì› ë¬¸ì˜ ìƒì„±:', supportTicket.subject);

  console.log('ğŸ‰ ë°ì´í„°ë² ì´ìŠ¤ ì‹œë”© ì™„ë£Œ!');
}

main()
  .then(async () => {
    await prisma.$disconnect();
  })
  .catch(async (e) => {
    console.error('âŒ ì‹œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
    await prisma.$disconnect();
    process.exit(1);
  });